

<!DOCTYPE html>
<html class="writer-html5" lang="ru" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D Сцена &mdash; Ren&#39;Py Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=c659a740" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/dark.css?v=70edf1c7" />

  
    <link rel="canonical" href="https://www.renpy.org/doc/html/3dstage.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8441e6a0"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/translations.js?v=cd1d70c9"></script>
      <script src="_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Live2D Cubism" href="live2d.html" />
    <link rel="prev" title="Layered Images" href="layeredimage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

<a href="https://www.renpy.org/" style="margin-bottom: 0">Ren'Py Visual Novel Engine
<img src="_static/navbar-logo.png" alt="Логотип" style="width: 93px; height: 100px; border-radius: 0; margin: 0 auto; padding: 0; margin-top: 5px; background-color: unset;" />
</a>

<a href="index.html" style="margin-bottom: 0px">8.4.0 Documentation</a>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI Customization Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The Ren'Py Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="language_basics.html">Language Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">Labels &amp; Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogue.html">Dialogue and Narration</a></li>
<li class="toctree-l1"><a class="reference internal" href="displaying_images.html">Displaying Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="menus.html">In-Game Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional.html">Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio_filters.html">Audio Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="movie.html">Movie</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">Voice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text, Displayables, Transforms, and Transitions</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="displayables.html">Displayables</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="transform_properties.html">Transform Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="transitions.html">Transitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrixcolor.html">Matrixcolor</a></li>
<li class="toctree-l1"><a class="reference internal" href="layeredimage.html">Layered Images</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3D Сцена</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Координаты</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Камера</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Использование 3D Сцены</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Глубина</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrix-transforms">Matrix Transforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Структурное сходство</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transformmatrix">TransformMatrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">Встроенные подклассы TransformMatrix</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#OffsetMatrix"><code class="docutils literal notranslate"><span class="pre">OffsetMatrix</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#RotateMatrix"><code class="docutils literal notranslate"><span class="pre">RotateMatrix</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ScaleMatrix"><code class="docutils literal notranslate"><span class="pre">ScaleMatrix</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transform-properties">Transform Properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Camera"><code class="docutils literal notranslate"><span class="pre">Camera</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="live2d.html">Live2D Cubism</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Customizing Ren'Py</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="style.html">Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_properties.html">Style Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="screens.html">Screens and Screen Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_actions.html">Screen Actions, Values, and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_special.html">Special Screen Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_optimization.html">Screen Language Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="preferences.html">Preference Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="store_variables.html">Store Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="mouse.html">Custom Mouse Cursors</a></li>
<li class="toctree-l1"><a class="reference internal" href="textshaders.html">Text Shaders</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="launcher.html">Launcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_tools.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="director.html">Interactive Director</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Functionality</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nvl_mode.html">NVL-Mode Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="bubble.html">Speech Bubbles</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Text Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="side_image.html">Side Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms.html">Image Gallery, Music Room, and Replay Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_drop.html">Drag and Drop</a></li>
<li class="toctree-l1"><a class="reference internal" href="sprites.html">Sprites</a></li>
<li class="toctree-l1"><a class="reference internal" href="keymap.html">Customizing the Keymap</a></li>
<li class="toctree-l1"><a class="reference internal" href="achievement.html">Achievements</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Dialogue History</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple.html">Multiple Character Dialogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="splashscreen_presplash.html">Splashscreen and Presplash</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifecycle.html">Lifecycle of a Ren'Py game</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python and Ren'Py</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="statement_equivalents.html">Statement Equivalents</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_load_rollback.html">Saving, Loading, and Rollback</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent.html">Persistent Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_advanced.html">Advanced GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_python.html">Screens and Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdd.html">Creator-Defined Displayables</a></li>
<li class="toctree-l1"><a class="reference internal" href="cds.html">Creator-Defined Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_text_tags.html">Custom Text Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="character_callbacks.html">Character Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_python.html">File Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="color_class.html">Color Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix.html">Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model-Based Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">Other Functions and Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="ren_py.html">_ren.py Files - Ren'Py in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="fetch.html">HTTPS/HTTP Fetch</a></li>
<li class="toctree-l1"><a class="reference internal" href="screenshot.html">Screenshots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Building, Updating, and Other Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="android.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="ios.html">iOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">Web / HTML5</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromeos.html">Chrome OS/Chromebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspi.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="iap.html">In-App Purchasing</a></li>
<li class="toctree-l1"><a class="reference internal" href="updater.html">HTTPS/HTTP Updater</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloader.html">Downloader for Large Games on Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="gesture.html">Gestures</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">End-User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems.html">Dealing with Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_variables.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="self_voicing.html">Self-Voicing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Library and Tool Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="template_projects.html">Template Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Engine Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="editor.html">Text Editor Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="skins.html">Skins</a></li>
<li class="toctree-l1"><a class="reference internal" href="translating_renpy.html">Translating Ren'Py</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changes, License, and Credits</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog (Ren'Py 7.x-)</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog6.html">Changelog (Ren'Py 6.11 - 6.99)</a></li>
<li class="toctree-l1"><a class="reference internal" href="incompatible.html">Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponsors.html">Ren'Py Development Sponsors</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ren'Py Visual Novel Engine</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">3D Сцена</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/renpy/renpy/blob/master/sphinx/source/3dstage.rst" class="fa fa-github"> Редактировать на GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="d">
<span id="dstage"></span><h1>3D Сцена<a class="headerlink" href="#d" title="Ссылка на этот заголовок"></a></h1>
<p>3D Сцена — это концепция, названная в честь театральных сцен, на которых проходят спектакли. Она позволяет размещать объекты (displayables) в трёх измерениях. Ren'Py затем отображает эти объекты с правильной перспективой и предоставляет доступ к оси Z, что делает возможным создание эффектов освещения и глубины.</p>
<section id="id1">
<h2>Координаты<a class="headerlink" href="#id1" title="Ссылка на этот заголовок"></a></h2>
<p>Наверное, самое важное, что нужно понять про 3D Сцену — это система координат, которую Ren'Py использует для 3D состояния. Вот система координат, которая применяется для размещения объектов (displayables) в 2D:</p>
<img alt="_images/axes_3d_1.png" src="_images/axes_3d_1.png" />
<p>В 2D прямоугольник имеет размер экрана, а ширина и высота видимой области задаются с помощью функции <a class="reference internal" href="gui_advanced.html#gui.init" title="gui.init"><code class="xref py py-func docutils literal notranslate"><span class="pre">gui.init()</span></code></a> (обычно это происходит при создании новой игры).</p>
<img alt="_images/axes_3d_2.png" src="_images/axes_3d_2.png" />
<p>3D сцена расширяет эту систему координат за счёт новой оси, направленной к зрителю. Значения больше 0 приближают изображение (делая его больше), а значения меньше 0 отдаляют изображение от зрителя (делая его меньше).</p>
<img alt="_images/axes_3d_3.png" src="_images/axes_3d_3.png" />
<p>И наконец, когда происходит вращение в 3D, оно происходит в направлениях, указанных здесь:</p>
<ul class="simple">
<li><p>При вращении вокруг оси Z, ось X движется в сторону оси Y.</p></li>
<li><p>При вращении вокруг оси X, ось Y движется в сторону оси Z.</p></li>
<li><p>При вращении вокруг оси Y, ось Z движется в сторону оси X.</p></li>
</ul>
<p>Эти системы координат основаны на тех, что используются в Ren'Py, что облегчает переход от 2D к 3D сцене. При импорте 3D моделей могут применяться преобразования координат, чтобы обеспечить корректное расположение модели.</p>
</section>
<section id="id2">
<h2>Камера<a class="headerlink" href="#id2" title="Ссылка на этот заголовок"></a></h2>
<p>Начальное положение камеры управляется параметрами функции <a class="reference internal" href="gui_advanced.html#gui.init" title="gui.init"><code class="xref py py-func docutils literal notranslate"><span class="pre">gui.init()</span></code></a>. Сначала Ren'Py использует значения <cite>width</cite> и <cite>fov</cite> для вычисления стандартного расстояния по оси <cite>z</cite>. При стандартном значении <cite>fov</cite>, равном 75:</p>
<ul class="simple">
<li><p>Когда ширина = 1280, z примерно 834</p></li>
<li><p>Когда ширина = 1920, z примерно 1251</p></li>
<li><p>Когда ширина = 3840, z примерно 2502</p></li>
</ul>
<p>Фактическое значение z чуть меньше (менее чем на 1) тех значений, что указаны здесь. Значение по умолчанию для z можно изменить с помощью свойства стиля <a class="reference internal" href="#transform-property-perspective"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">perspective</span></code></a> или переменной <a class="reference internal" href="#var-config.perspective"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.perspective</span></code></a>.</p>
<p>Ren'Py автоматически смещает камеру на (<cite>ширина</cite> / 2, <cite>высота</cite> / 2, <cite>z</cite>) и направляет её вдоль отрицательной оси Z.</p>
<p>Расстояние <cite>z</cite> — это также расстояние от камеры до плоскости, на которой пиксели на экране отображаются в том же размере, что и в исходных изображениях (без учёта масштабирования окна). Увеличение значения z камеры делает всё меньше, а уменьшение — наоборот, всё больше.</p>
<p>Наконец, <a class="reference internal" href="#transform-property-perspective"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">perspective</span></code></a> и <a class="reference internal" href="#var-config.perspective"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.perspective</span></code></a> задают ближнюю и дальнюю плоскости, по умолчанию равные 100 и 100000 соответственно. Это означает, что изображение исчезает, если оно находится ближе 100 единиц по оси z к камере, или дальше 100000 единиц.</p>
<dl class="std var">
<dt class="sig sig-object std" id="var-config.perspective">
<span class="pre">define</span> <span class="sig-name descname"><span class="pre">config.perspective</span></span> <span class="pre">=</span> <span class="pre">(100,</span> <span class="pre">z,</span> <span class="pre">100000)</span><a class="headerlink" href="#var-config.perspective" title="Ссылка на это определение"></a></dt>
<dd><p>Значение по умолчанию используется, когда <a class="reference internal" href="#transform-property-perspective"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">perspective</span></code></a> не задан как кортеж из трёх элементов. Значение <code class="docutils literal notranslate"><span class="pre">z</span></code> зависит от размера игры, как было описано выше.</p>
</dd></dl>

</section>
<section id="id3">
<h2>Использование 3D Сцены<a class="headerlink" href="#id3" title="Ссылка на этот заголовок"></a></h2>
<p>Первое, что нужно сделать для использования 3D сцены — это включить её для слоя с помощью оператора <code class="docutils literal notranslate"><span class="pre">camera</span></code>. Если имя слоя не указано, по умолчанию используется слой <code class="docutils literal notranslate"><span class="pre">master</span></code>. Обычно это делается так:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="c1"># Включение 3D сцены для слоя master.</span>
<span class="k">camera</span><span class="p">:</span>
    <span class="na">perspective</span> <span class="kc">True</span>
</pre></div>
</div>
<p>хотя, возможно, вы захотите задать позицию камеры по умолчанию, как описано ниже.</p>
<p>Кроме того, вы можете указать конкретное имя слоя, чтобы включить 3D сцену только для этого слоя.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="c1"># Включение 3D сцены для слоя background.</span>
<span class="k">camera</span> <span class="na">background</span><span class="p">:</span>
    <span class="na">perspective</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Отображение изображений (фонов и спрайтов) происходит так же, как и при использовании 2D координат.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">scene</span> <span class="n">bg</span> <span class="n">washington</span>

<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span> <span class="k">at</span> <span class="n">right</span>

<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span>
</pre></div>
</div>
<p>Однако можно использовать трансформы (transform), чтобы перемещать эти объекты (displayables) в трёхмерном пространстве:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">scene</span> <span class="n">bg</span> <span class="n">washington</span><span class="p">:</span>
    <span class="na">xalign</span> <span class="mf">0.5</span> <span class="na">yalign</span> <span class="mf">1.0</span> <span class="na">zpos</span> <span class="o">-</span><span class="mi">1000</span>

<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span><span class="p">:</span>
    <span class="na">xalign</span> <span class="mf">1.0</span> <span class="na">yalign</span> <span class="mf">1.0</span> <span class="na">zpos</span> <span class="mi">100</span>

<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span><span class="p">:</span>
    <span class="na">xalign</span> <span class="mf">0.5</span> <span class="na">yalign</span> <span class="mf">1.0</span> <span class="na">zpos</span> <span class="mi">200</span>
</pre></div>
</div>
<p>Если задан ATL-трансформ, то трансформ по умолчанию не используется, и необходимо указать <a class="reference internal" href="transform_properties.html#transform-property-xalign"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">xalign</span></code></a> и <a class="reference internal" href="transform_properties.html#transform-property-yalign"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">yalign</span></code></a> для позиционирования объекта по осям x и y. Конечно, также можно использовать трансформы.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">transform</span> <span class="n">zbg</span><span class="p">:</span>
    <span class="na">zpos</span> <span class="o">-</span><span class="mi">100</span>

<span class="k">transform</span> <span class="n">z100</span><span class="p">:</span>
    <span class="na">zpos</span> <span class="mi">100</span>

<span class="k">transform</span> <span class="n">z200</span><span class="p">:</span>
    <span class="na">zpos</span> <span class="mi">200</span>

<span class="k">scene</span> <span class="n">bg</span> <span class="n">washington</span> <span class="k">at</span> <span class="n">center</span><span class="p">,</span> <span class="n">zbg</span>

<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span> <span class="k">at</span> <span class="n">right</span><span class="p">,</span> <span class="n">z100</span>

<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">center</span><span class="p">,</span> <span class="n">z200</span>
</pre></div>
</div>
<p>Если попробовать это сделать, вы увидите пустое пространство вокруг фона. Это происходит потому, что при отодвигании назад изображение становится меньше и не заполняет экран. В Ren'Py есть простой способ решить эту проблему — свойство <a class="reference internal" href="#transform-property-zzoom"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">zzoom</span></code></a>. Установка <a class="reference internal" href="#transform-property-zzoom"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">zzoom</span></code></a> в True масштабирует изображение пропорционально тому, насколько оно уменьшилось из-за отрицательного значения zpos. Это удобно для фонов.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">transform</span> <span class="n">zbg</span><span class="p">:</span>
    <span class="na">zpos</span> <span class="o">-</span><span class="mi">100</span> <span class="na">zzoom</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Также можно использовать ATL для изменения значения zpos, так же, как и для xpos и ypos.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">center</span><span class="p">:</span>
    <span class="na">zpos</span> <span class="mi">0</span>
    <span class="n">linear</span> <span class="mf">4.0</span> <span class="na">zpos</span> <span class="mi">200</span>
</pre></div>
</div>
<p>Обратите внимание, что zpos может вести себя странно в сочетании с позициями вроде <code class="docutils literal notranslate"><span class="pre">left</span></code> и <code class="docutils literal notranslate"><span class="pre">right</span></code>, а также с <a class="reference internal" href="style_properties.html#style-property-xalign"><code class="xref std std-propref docutils literal notranslate"><span class="pre">xalign</span></code></a> и <a class="reference internal" href="style_properties.html#style-property-yalign"><code class="xref std std-propref docutils literal notranslate"><span class="pre">yalign</span></code></a>. Это происходит потому, что Ren'Py размещает изображения внутри трёхмерного прямоугольного объёма (как куб, но не все стороны одинаковой длины), а затем применяет перспективу, из-за чего части изображения могут выйти за пределы экрана.</p>
<p>Также можно перемещать камеру с помощью оператора <code class="docutils literal notranslate"><span class="pre">camera</span></code>. Например,</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">camera</span><span class="p">:</span>
    <span class="na">perspective</span> <span class="kc">True</span>
    <span class="na">xpos</span> <span class="mi">0</span>
    <span class="n">linear</span> <span class="mf">3.0</span> <span class="na">xpos</span> <span class="mi">500</span>
</pre></div>
</div>
<p>В таком случае имеет смысл использовать фоновые изображения, которые больше окна.</p>
<p>Если вы применяете zpos к спрайту, а он не срабатывает, скорее всего, причина в том, что вы пропустили параметр <code class="docutils literal notranslate"><span class="pre">perspective</span></code> в трансформе <code class="docutils literal notranslate"><span class="pre">camera</span></code>.</p>
<p>Камеру можно вращать с помощью:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">camera</span><span class="p">:</span>
    <span class="na">perspective</span> <span class="kc">True</span>
    <span class="na">rotate</span> <span class="mi">45</span>
</pre></div>
</div>
<p>Поскольку вращается камера, вращение происходит в противоположном направлении по сравнению с вращением объекта (displayable).</p>
</section>
<section id="id4">
<h2>Глубина<a class="headerlink" href="#id4" title="Ссылка на этот заголовок"></a></h2>
<p>По умолчанию Ren'Py отображает изображения в обычном порядке, при котором последнее показанное изображение находится поверх остальных. Это может приводить к странным эффектам, например, когда более близкое изображение (с точки зрения перспективы) оказывается позади более удалённого.</p>
<p>Если в вашей игре изображения отображаются в неправильном порядке, вы можете указать GPU сортировать их по глубине с помощью свойства <code class="xref std std-tpref docutils literal notranslate"><span class="pre">gl_depth</span></code>:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">camera</span><span class="p">:</span>
    <span class="na">perspective</span> <span class="kc">True</span>
    <span class="na">gl_depth</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Небольшие ошибки округления могут привести к тому, что изображения, находящиеся на одинаковой глубине, будут отображаться одно над другим или наоборот. Объединение таких изображений (флеттенинг) и их совместное отображение может решить эту проблему.</p>
</section>
<section id="matrix-transforms">
<h2>Matrix Transforms<a class="headerlink" href="#matrix-transforms" title="Ссылка на этот заголовок"></a></h2>
<p>Ren'Py использует свойство трансформации <a class="reference internal" href="#transform-property-matrixtransform"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">matrixtransform</span></code></a> для применения матрицы к объектам (displayables), что позволяет масштабировать, смещать и вращать изображение в трёхмерном пространстве. Это свойство принимает либо объект <a class="reference internal" href="matrix.html#Matrix" title="Matrix"><code class="xref py py-func docutils literal notranslate"><span class="pre">Matrix()</span></code></a>, либо TransformMatrix (описанный ниже), и применяется к вершинам углов отображаемого изображения.</p>
<p>Для удобства применения матрицы Ren'Py использует свойство трансформации <a class="reference internal" href="#transform-property-matrixanchor"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">matrixanchor</span></code></a>. Оно по умолчанию равно (0.5, 0.5) и переводится в смещение в пикселях внутри изображения, используя стандартные правила якоря Ren'Py. (Если значение целое или абсолютное, оно считается числом пикселей, иначе — долей от размера изображения.)</p>
<p>Ren'Py сначала смещает изображение так, чтобы якорь оказался в точке (0, 0, 0), затем применяет трансформацию, а потом смещает обратно на ту же величину. При значениях по умолчанию это означает, что матрица применяется к центру изображения.</p>
<p>Например:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">center</span><span class="p">:</span>
    <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Изображение будет вращаться вокруг линии, проходящей горизонтально через его центр. Верхняя часть изображения отодвинется назад, а нижняя — приблизится вперёд.</p>
<p>Матрицы можно соединять между собой умножением. Проще всего представлять, что они применяются справа налево. В этом примере:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">center</span><span class="p">:</span>
    <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">OffsetMatrix</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Изображение будет сдвинуто вверх на 300 пикселей, а затем повернуто вокруг оси X.</p>
<section id="id5">
<h3>Структурное сходство<a class="headerlink" href="#id5" title="Ссылка на этот заголовок"></a></h3>
<p>В ATL интерполяция свойства <a class="reference internal" href="#transform-property-matrixtransform"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">matrixtransform</span></code></a> требует использования TransformMatrix с одинаковой структурой. Это означает, что должны применяться одинаковые типы TransformMatrix в одном и том же порядке.</p>
<p>Например, следующий код сначала поворачивает и смещает изображение, а затем возвращает обратно:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">center</span><span class="p">:</span>
    <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">OffsetMatrix</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">linear</span> <span class="mf">2.0</span> <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">OffsetMatrix</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">linear</span> <span class="mf">2.0</span> <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">OffsetMatrix</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Хотя первое задание matrixtransform может показаться лишним, оно необходимо для установки базового значения для первой линейной интерполяции. Если его не будет, эта интерполяция будет пропущена.</p>
</section>
</section>
<section id="transformmatrix">
<h2>TransformMatrix<a class="headerlink" href="#transformmatrix" title="Ссылка на этот заголовок"></a></h2>
<p>Хотя объекты Matrix подходят для статических трансформаций, они не годятся для анимации изменяющихся трансформаций. Также полезно иметь способ создания часто используемых матриц с параметрами.</p>
<p>TransformMatrix — это базовый класс, который расширяется рядом классов для создания матриц. Экземпляры TransformMatrix вызываются Ren'Py и возвращают объекты Matrix. TransformMatrix хорошо интегрирован с ATL, что позволяет создавать анимации с помощью matrixtransform.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">transform</span> <span class="na">xrotate</span><span class="p">:</span>
    <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">linear</span> <span class="mf">4.0</span> <span class="na">matrixtransform</span> <span class="n">RotateMatrix</span><span class="p">(</span><span class="mf">360.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="k">repeat</span>
</pre></div>
</div>
<p>От подклассов TransformMatrix ожидается реализация метода <code class="docutils literal notranslate"><span class="pre">__call__</span></code>. Этот метод принимает:</p>
<ul class="simple">
<li><p>Старый объект, от которого производится интерполяция. Этот объект может быть любого класса или None, если старого объекта нет.</p></li>
<li><p>Значение от 0.0 до 1.0, обозначающее точку интерполяции. 0.0 — полностью старый объект, 1.0 — полностью новый объект.</p></li>
</ul>
</section>
<section id="id6">
<h2>Встроенные подклассы TransformMatrix<a class="headerlink" href="#id6" title="Ссылка на этот заголовок"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">См. также</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">SplineMatrix</span></code>, который работает с подклассами TransformMatrix.</p>
</div>
<p>Ниже приведён список подклассов TransformMatrix, встроенных в Ren'Py.</p>
<dl class="py class">
<dt class="sig sig-object py" id="OffsetMatrix">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OffsetMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#OffsetMatrix" title="Ссылка на это определение"></a></dt>
<dd><p>TransformMatrix, возвращающая матрицу, которая смещает вершину на фиксированную величину.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="RotateMatrix">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RotateMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#RotateMatrix" title="Ссылка на это определение"></a></dt>
<dd><p>TransformMatrix, возвращающая матрицу, которая поворачивает отображаемый объект вокруг начала координат.</p>
<dl class="simple">
<dt><cite>x</cite>, <cite>y</cite>, <cite>z</cite></dt><dd><p>Величина поворота вокруг начала координат, в градусах.</p>
</dd>
</dl>
<p>Повороты применяются в следующем порядке:</p>
<blockquote>
<div><ul class="simple">
<li><p>Поворот по часовой стрелке на <cite>x</cite> градусов в плоскости Y/Z.</p></li>
<li><p>Поворот по часовой стрелке на <cite>y</cite> градусов в плоскости Z/X.</p></li>
<li><p>Поворот по часовой стрелке на <cite>z</cite> градусов в плоскости X/Y.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ScaleMatrix">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ScaleMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ScaleMatrix" title="Ссылка на это определение"></a></dt>
<dd><p>TransformMatrix, который возвращает матрицу масштабирования объекта.</p>
<p><cite>x</cite>, <cite>y</cite>, <cite>z</cite></p>
</dd></dl>

<p>        Факторы масштабирования по каждой оси.</p>
</section>
<section id="transform-properties">
<h2>Transform Properties<a class="headerlink" href="#transform-properties" title="Ссылка на этот заголовок"></a></h2>
<p>The following transform properties are used by the 3D Stage.</p>
<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-matrixanchor">
<span class="sig-name descname"><span class="pre">matrixanchor</span></span><a class="headerlink" href="#transform-property-matrixanchor" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(position, position)</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>(0.5, 0.5)</p>
</dd>
</dl>
<p>This gives the position of the matrix anchor relative to the image. If the
variables are floats, this is relative to the size of the child, otherwise
it's absolute pixels.</p>
<p>This sets the location of the (0, 0, 0) point that point_to, orientation,
xrotate, yrotate, zrotate and matrixtransform apply their transforms to.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-point_to">
<span class="sig-name descname"><span class="pre">point_to</span></span><a class="headerlink" href="#transform-property-point_to" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(float, float, float), Camera, or None</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>This gives a position to which to point. The camera or the
displayable being transformed are rotated to face that point,
even if the position of the camera or the displayable is changed.</p>
<p>If this is None, no point-of-interest rotation is applied.</p>
<p>If this is not None, this is a 3-tuple or an instance of <a class="reference internal" href="#Camera" title="Camera"><code class="xref py py-func docutils literal notranslate"><span class="pre">Camera()</span></code></a>.
An (x, y, z) format tuple represents the position of the point of interest.
An instance of Camera means to point at the camera.</p>
<p>Note point_to isn't updated automatically. so, you should write like below if
you want it is updated:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="c1"># eileen always faces to the camera.</span>
<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">center</span><span class="p">:</span>
    <span class="na">point_to</span> <span class="n">Camera</span><span class="p">()</span>
    <span class="mi">0</span>
    <span class="k">repeat</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="Camera">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Camera</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'master'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Camera" title="Ссылка на это определение"></a></dt>
<dd><p>Instances of this class can be used with point_to to point
at the location of the camera for a particular layer.</p>
<dl class="simple">
<dt><cite>layer</cite></dt><dd><p>The name of the layer.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-orientation">
<span class="sig-name descname"><span class="pre">orientation</span></span><a class="headerlink" href="#transform-property-orientation" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(float, float, float) or None</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>This rotates the camera or the displayable. The three values are the
x, y, and z rotations, in degrees. The rotations are applied in x, y, z
order for displayables, and z, y, x order for the camera.</p>
<p>When interpolation is used with orientation, the shortest path is taken
between the old and new orientations.</p>
<p>If this is None, no orientation is applied.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-xrotate">
<span class="sig-name descname"><span class="pre">xrotate</span></span><a class="headerlink" href="#transform-property-xrotate" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or None</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>This rotates the camera or the displayable around the x axis. The value is
the rotation, in degrees. Rotations are applied to displayables in x, y, z
order. Rotations are applied to the camera in z, y, x order.</p>
<p>If this is None, no x-axis rotation is applied.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-yrotate">
<span class="sig-name descname"><span class="pre">yrotate</span></span><a class="headerlink" href="#transform-property-yrotate" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or None</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>This rotates the camera or the displayable around the y axis. The value is
the rotation, in degrees. Rotations are applied to displayables in x, y, z
order. Rotations are applied to the camera in z, y, x order.</p>
<p>If this is None, no y-axis rotation is applied.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-zrotate">
<span class="sig-name descname"><span class="pre">zrotate</span></span><a class="headerlink" href="#transform-property-zrotate" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or None</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>This rotates the camera or the displayable around the z axis. The value is
the rotation, in degrees. Rotations are applied to displayables in x, y, z
order. Rotations are applied to the camera in z, y, x order.</p>
<p>If this is None, no z-axis rotation is applied.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-matrixtransform">
<span class="sig-name descname"><span class="pre">matrixtransform</span></span><a class="headerlink" href="#transform-property-matrixtransform" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None or Matrix or TransformMatrix</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>If not None, this gives a matrix that is used to transform the vertices
of the child of the transform. The transformation goes from the coordinates
used by the screen to the coordinates used by the child of the transform.</p>
<p>Interpolations involving this property are only supported when using a
TransformMatrix, and when the TransformMatrix values are structurally similar,
as described above.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-perspective">
<span class="sig-name descname"><span class="pre">perspective</span></span><a class="headerlink" href="#transform-property-perspective" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>True or False or Float or (Float, Float, Float)</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p>When applied to a transform, this enables perspective rendering. This
takes a triple, giving the near plane, z-distance to the 1:1 plane, and
far plane.</p>
<p>If a single float, the distances to the near and far planes are taken
from <a class="reference internal" href="#var-config.perspective"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.perspective</span></code></a>. If True, all three values are taken
from that variable.</p>
<p>When perspective is not false, the meaning of the <a class="reference internal" href="transform_properties.html#transform-property-xpos"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">xpos</span></code></a>, <a class="reference internal" href="transform_properties.html#transform-property-ypos"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">ypos</span></code></a>,
<a class="reference internal" href="#transform-property-zpos"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">zpos</span></code></a>, and <a class="reference internal" href="transform_properties.html#transform-property-rotate"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">rotate</span></code></a> are inverted, providing the effect of positioning the
camera rather than the child.</p>
<p>As the perspective transformation assumes it's aligned with the window,
it doesn't make sense to reposition it using <a class="reference internal" href="transform_properties.html#transform-property-xanchor"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">xanchor</span></code></a>, and <a class="reference internal" href="transform_properties.html#transform-property-yanchor"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">yanchor</span></code></a>,
or properties that set those, such as <a class="reference internal" href="transform_properties.html#transform-property-anchor"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">anchor</span></code></a>, <a class="reference internal" href="transform_properties.html#transform-property-align"><code class="xref std std-tpref docutils literal notranslate"><span class="pre">align</span></code></a>, <code class="xref std std-tpref docutils literal notranslate"><span class="pre">center</span></code>,
etc.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-zpos">
<span class="sig-name descname"><span class="pre">zpos</span></span><a class="headerlink" href="#transform-property-zpos" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>0</p>
</dd>
</dl>
<p>This offsets the child along the z-axis. When perspective is false,
this is used directly, otherwise it is multiplied by -1 and used.</p>
<p>If setting this causes the child to disappear, it's likely that the
transform is not being used with a displayable where zpos is False.</p>
</dd></dl>

<dl class="std transform-property">
<dt class="sig sig-object std" id="transform-property-zzoom">
<span class="sig-name descname"><span class="pre">zzoom</span></span><a class="headerlink" href="#transform-property-zzoom" title="Ссылка на это определение"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>If this is true, the z-distance to the 1:1 plane (<cite>zone</cite>) is determined,
along with this displayable's zpos. The child is then scaled by (<cite>zone</cite> - <cite>zpos</cite>) / <cite>zone</cite>
in the x and y axes.</p>
<p>The intended use for this is in displaying a background with a negative <cite>zpos</cite>, which
would normally make the background small. Setting this to true means that the background
will be displayed at 1:1 size.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="layeredimage.html" class="btn btn-neutral float-left" title="Layered Images" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="live2d.html" class="btn btn-neutral float-right" title="Live2D Cubism" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>